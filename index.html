<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gu√≠a Interactiva de Asados al Barril</title>
    <!-- Carga de Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Carga de Inter Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        /* Estilos personalizados */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f3e8; /* Tono crema claro inspirado en el PDF */
            color: #4a2d1f; /* Marr√≥n oscuro para el texto */
        }
        .tab-button {
            transition: all 0.3s ease;
            border-bottom-width: 4px;
            border-color: transparent;
        }
        .tab-button.active {
            border-color: #d97706; /* Naranja/√°mbar */
            color: #d97706;
            font-weight: 700;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .accordion-header {
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .accordion-header:hover {
            background-color: #fffbf0;
        }
        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-out;
        }
        .recipe-card {
            background-color: #ffffff;
            border: 1px solid #e0d9c4;
            transition: all 0.3s ease;
            cursor: pointer;
            /* ! Se a√±ade para la l√≥gica de filtrado/b√∫squeda */
            display: block; 
        }
        .recipe-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.05), 0 4px 6px -2px rgba(0, 0, 0, 0.03);
        }
        /* Estilos del Modal */
        #recipe-modal {
            display: none; /* Oculto por defecto */
            position: fixed;
            z-index: 50;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.6);
            align-items: center;
            justify-content: center;
        }
        #modal-content {
            background-color: #fff;
            margin: auto;
            padding: 24px;
            border-radius: 12px;
            width: 90%;
            max-width: 700px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            animation: slide-down 0.3s ease-out;
        }
        #modal-close {
            position: absolute;
            top: 16px;
            right: 16px;
            cursor: pointer;
            font-size: 1.5rem;
            line-height: 1;
            color: #9ca3af;
        }
        #modal-close:hover {
            color: #111827;
        }
        @keyframes slide-down {
            from {
                transform: translateY(-30px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
        ul, ol {
            list-style-position: inside;
        }
        ul {
            list-style-type: disc;
        }
        ol {
            list-style-type: decimal;
        }
        /* Estilos para Filtros */
        .filter-button {
            background-color: #f3f4f6;
            color: #4a2d1f;
            padding: 8px 16px;
            border-radius: 99px;
            border: 1px solid #e0d9c4;
            font-weight: 600;
            transition: all 0.2s ease;
            cursor: pointer;
            white-space: nowrap;
        }
        .filter-button:hover {
            background-color: #fffbf0;
        }
        .filter-button.active {
            background-color: #d97706;
            color: #ffffff;
            border-color: #d97706;
        }

        /* ! INICIO: Nuevos Estilos (B√∫squeda, Impresi√≥n, Nuevos Datos) */
        #search-bar {
            width: 100%;
            padding: 10px 16px;
            border: 2px solid #e0d9c4;
            border-radius: 12px;
            font-size: 1rem;
            color: #4a2d1f;
            background-color: #fffbf0;
        }
        #search-bar:focus {
            outline: none;
            border-color: #d97706;
            box-shadow: 0 0 0 3px rgba(217, 119, 6, 0.2);
        }
        /* ! INICIO: Nuevos Estilos (Orden, Favoritos, Tips) */
        #sort-select {
            padding: 10px 16px;
            border: 2px solid #e0d9c4;
            border-radius: 12px;
            font-size: 1rem;
            color: #4a2d1f;
            background-color: #fffbf0;
            width: 100%;
        }
        #sort-select:focus {
            outline: none;
            border-color: #d97706;
            box-shadow: 0 0 0 3px rgba(217, 119, 6, 0.2);
        }
        .favorite-btn {
            position: absolute;
            top: 12px;
            right: 12px;
            font-size: 1.75rem; /* 28px */
            cursor: pointer;
            transition: transform 0.2s ease, color 0.2s ease;
            color: rgba(255, 255, 255, 0.7); /* Blanco semitransparente */
            text-shadow: 0 1px 3px rgba(0,0,0,0.4);
            z-index: 10;
        }
        .favorite-btn:hover {
            transform: scale(1.15);
        }
        .favorite-btn.active {
            color: #ef4444; /* Rojo */
            transform: scale(1.1);
        }
        .recipe-card-image-container {
            position: relative;
        }
        #modal-tips-content {
            background-color: #fffbf0;
            border-left: 4px solid #d97706;
            padding: 16px;
            border-radius: 8px;
            margin-top: 16px;
        }
        /* ! FIN: Nuevos Estilos */
        .card-details {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 16px 12px;
            background-color: #fdfcf9;
            border-top: 1px solid #f3f0e8;
            font-size: 0.875rem;
            color: #785a4b;
        }
        #modal-print-btn {
            background-color: #d97706;
            color: white;
            font-weight: 600;
            padding: 10px 16px;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.2s ease;
            margin-top: 24px;
        }
        #modal-print-btn:hover {
            background-color: #b45f06;
        }
        /* Estilos de impresi√≥n */
        @media print {
            body * {
                visibility: hidden;
            }
            #print-area, #print-area * {
                visibility: visible;
            }
            #print-area {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
            }
        }
        /* ! FIN: Nuevos Estilos */

    </style>
</head>
<body class="p-4 md:p-8">

    <div class="container mx-auto max-w-6xl bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl overflow-hidden border border-gray-200">
        <!-- Cabecera -->
        <header class="p-6 md:p-8 bg-cover bg-center" style="background-image: url('https://placehold.co/1200x300/8c5a40/f7f3e8?text=Asados+al+Barril');">
            <!-- T√≠tulo eliminado -->
        </header>

        <!-- Pesta√±as de Navegaci√≥n -->
        <nav class="flex border-b border-gray-300 bg-gray-50">
            <button class="tab-button flex-1 py-4 px-6 text-lg font-semibold text-gray-800 active" data-tab="tecnicas">
                T√©cnicas Esenciales
            </button>
            <button class="tab-button flex-1 py-4 px-6 text-lg font-semibold text-gray-800" data-tab="recetas">
                Recetario Completo
            </button>
        </nav>

        <!-- Contenido de Pesta√±as -->
        <main class="p-6 md:p-8 pb-16">

            <!-- Pesta√±a de T√©cnicas -->
            <section id="tecnicas-content" class="tab-content active space-y-4">
                
                <!-- Acorde√≥n de T√©cnicas (Sin cambios) -->
                <div class="accordion-item bg-white border border-gray-200 rounded-lg overflow-hidden">
                    <h3 class="accordion-header flex justify-between items-center p-5">
                        <span class="text-xl font-bold text-amber-700">Cap. 1: Fundamentos de los Asados al Barril</span>
                        <span class="text-2xl font-light">+</span>
                    </h3>
                    <div class="accordion-content px-5 pb-5">
                        <ul class="list-disc space-y-2 text-base">
                            <li><strong>¬øQu√© son?</strong> T√©cnica culinaria de cocci√≥n lenta con calor indirecto y humo, que da un sabor ahumado y textura tierna.</li>
                            <li><strong>Equipo B√°sico:</strong> Barril o parrilla, term√≥metro confiable, le√±a o carb√≥n de calidad.</li>
                            <li><strong>Preparaci√≥n y Encendido:</strong>
                                <ol class="list-decimal ml-6 mt-1">
                                    <li>Limpiar el barril o parrilla de residuos.</li>
                                    <li>A√±adir le√±a o carb√≥n y encender. Dejar que se desarrollen las brasas.</li>
                                    <li>Ajustar la temperatura usando las ventilas para controlar el calor.</li>
                                </ol>
                            </li>
                        </ul>
                    </div>
                </div>

                <div class="accordion-item bg-white border border-gray-200 rounded-lg overflow-hidden">
                    <h3 class="accordion-header flex justify-between items-center p-5">
                        <span class="text-xl font-bold text-amber-700">Cap. 2: Selecci√≥n y Preparaci√≥n de la Carne</span>
                        <span class="text-2xl font-light">+</span>
                    </h3>
                    <div class="accordion-content px-5 pb-5">
                        <ul class="list-disc space-y-2 text-base">
                            <li><strong>Marmoleo:</strong> Busca vetas de grasa intramuscular (8-12% ideal) para sabor y jugosidad. Presente en Ribeye, filete de lomo, brisket.</li>
                            <li><strong>Frescura:</strong> Compra en proveedores de confianza. Opta por carne local y de pasto si es posible.</li>
                            <li><strong>Cortes Populares (Gramaje por persona):</strong>
                                <ul class="list-disc ml-6 mt-1">
                                    <li><strong>Costillar de Cerdo:</strong> 500g - 1kg. Cl√°sico y jugoso.</li>
                                    <li><strong>Brisket de Res:</strong> 200g - 300g. Sabor ahumado intenso, textura tierna.</li>
                                    <li><strong>Pechuga de Pollo:</strong> 150g - 200g. Magra y vers√°til, absorbe bien sabores.</li>
                                    <li><strong>Lomo de Cerdo:</strong> 200g - 250g. Magro y tierno, ideal para personalizar.</li>
                                    <li><strong>Muslos de Pollo:</strong> 2 muslos (150g-200g total). Jugosos y con m√°s grasa.</li>
                                    <li><strong>Costillas de Cordero:</strong> 200g - 250g. Tiernas y con sabor caracter√≠stico.</li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>

                <div class="accordion-item bg-white border border-gray-200 rounded-lg overflow-hidden">
                    <h3 class="accordion-header flex justify-between items-center p-5">
                        <span class="text-xl font-bold text-amber-700">Cap. 3: Marinados y Adobos</span>
                        <span class="text-2xl font-light">+</span>
                    </h3>
                    <div class="accordion-content px-5 pb-5">
                        <p class="mb-4">T√©cnicas para infundir sabor y ablandar la carne antes de la cocci√≥n.</p>
                        <h4 class="font-bold text-lg mb-2">Marinados (L√≠quidos)</h4>
                        <ul class="list-disc space-y-2 mb-4">
                            <li><strong>De Hierbas y C√≠tricos:</strong> Jugo de lim√≥n, aceite de oliva, romero, tomillo, ajo. (Marinar 2-4 horas).</li>
                            <li><strong>De Cerveza y Mostaza:</strong> Cerveza (Ale), salsa de soja, mostaza Dijon, ajo, az√∫car moreno. (Marinar 4-6 horas).</li>
                        </ul>
                        <h4 class="font-bold text-lg mb-2">Adobos (Pastas/Mezclas secas)</h4>
                        <ul class="list-disc space-y-2">
                            <li><strong>De Chile y Ajo:</strong> Chiles secos (guajillo, ancho), ajo, aceite de oliva, comino, or√©gano. Se lic√∫a hasta formar una pasta.</li>
                            <li><strong>De Yogur y Hierbas:</strong> Yogur natural, menta, cilantro, comino, paprika. Reposar 2 horas.</li>
                        </ul>
                    </div>
                </div>
                
                <div class="accordion-item bg-white border border-gray-200 rounded-lg overflow-hidden">
                    <h3 class="accordion-header flex justify-between items-center p-5">
                        <span class="text-xl font-bold text-amber-700">Cap. 4: T√©cnicas de Cocina</span>
                        <span class="text-2xl font-light">+</span>
                    </h3>
                    <div class="accordion-content px-5 pb-5">
                        <ul class="list-disc space-y-4 text-base">
                            <li><strong>Control de Temperatura:</strong>
                                <ul class="list-disc ml-6 mt-1 space-y-2">
                                    <li><strong>Zonas de Calor:</strong> Crear una zona directa (sobre brasas, para sellar) y una indirecta (lejos de brasas, para cocci√≥n lenta y ahumado).</li>
                                    <li><strong>Medici√≥n:</strong> Usar un term√≥metro confiable. Ajustar temperatura con las ventilas (m√°s abiertas = m√°s calor).</li>
                                    <li><strong>Temperaturas Internas Objetivo:</strong>
                                        <ul class="list-disc ml-6 mt-1">
                                            <li>Costillar de Cerdo: 63-71¬∞C</li>
                                            <li>Brisket de Res: 88-93¬∞C</li>
                                            <li>Pechuga de Pollo: 74-79¬∞C</li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                            <li><strong>Cocci√≥n Lenta (Indirecta):</strong>
                                <ul class="list-disc ml-6 mt-1 space-y-2">
                                    <li><strong>Definici√≥n:</strong> La carne se coloca lejos del fuego directo. Es la t√©cnica principal para asados al barril (BBQ).</li>
                                    <li><strong>Uso:</strong> Perfecta para piezas grandes que requieren tiempos largos (ej. brisket 10-12 horas a 107-121¬∞C). Logra la textura tierna y desmenuzable.</li>
                                    <li><strong>Humedad:</strong> Colocar recipientes con agua en el barril para evitar que la carne se seque.</li>
                                    <li><strong>Rotaci√≥n:</strong> Girar y voltear la carne (especialmente piezas grandes) para cocci√≥n uniforme.</li>
                                </ul>
                            </li>
                            <li><strong>Cocci√≥n R√°pida (Directa / Sellado):</strong>
                                <ul class="list-disc ml-6 mt-1 space-y-2">
                                    <li><strong>Definici√≥n:</strong> La carne se coloca directamente sobre las brasas calientes.</li>
                                    <li><strong>Uso:</strong> Ideal para sellar la carne, crear una costra (reacci√≥n de Maillard) y cocinar cortes m√°s delgados.</li>
                                    <li><strong>Tiempos Cortos:</strong> Se usa para filetes (3-5 min por lado), costillas de cordero (3-4 min por lado) o para dorar la carne antes de pasarla a cocci√≥n indirecta.</li>
                                </ul>
                            </li>
                            <li><strong>Sabor Ahumado Perfecto:</strong>
                                <ul class="list-disc ml-6 mt-1 space-y-2">
                                    <li><strong>Selecci√≥n de Madera:</strong> Nogal (suave), Manzano (frutal), Nogal Americano (fuerte), Mezquite (intenso).</li>
                                    <li><strong>Remojo:</strong> Remojar la madera 30 min antes para un humo m√°s limpio.</li>
                                    <li><strong>Control del Humo:</strong> Evitar humo denso (da sabor amargo). Usar ventilas.</li>
                                    <li><strong>Tiempo y Temperatura:</strong> Ahumar entre 107-121¬∞C. (ej. Costillar 2-4 horas, Brisket 4-6 horas).</li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>

                <div class="accordion-item bg-white border border-gray-200 rounded-lg overflow-hidden">
                    <h3 class="accordion-header flex justify-between items-center p-5">
                        <span class="text-xl font-bold text-amber-700">Cap. 7: Servicio y Presentaci√≥n</span>
                        <span class="text-2xl font-light">+</span>
                    </h3>
                    <div class="accordion-content px-5 pb-5">
                        <ul class="list-disc space-y-2 text-base">
                            <li><strong>Primera Impresi√≥n:</strong> Usar vajilla limpia. Combinar colores y contrastes de los alimentos.</li>
                            <li><strong>Decoraci√≥n:</strong> Usar elementos frescos como hierbas (albahaca, perejil) o rodajas de lim√≥n.</li>
                            <li><strong>Salsas y Aderezos:</strong> Servir en recipientes decorativos. Experimentar con salsas caseras.</li>
                            <li><strong>Acompa√±amientos:</strong> Combinar texturas (crujientes y suaves) y colores.</li>
                            <li><strong>Servicio:</strong> Mantener platos calientes. Informar la temperatura de la carne. Ser amable y atento.</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- Pesta√±a de Recetas -->
            <section id="recetas-content" class="tab-content">
                
                <!-- ! INICIO: Controles de B√∫squeda y Filtro -->
                <div class="mb-8 space-y-4">
                    <!-- Barra de B√∫squeda -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label for="search-bar" class="block text-sm font-semibold mb-2">Buscar Receta:</label>
                            <input type="text" id="search-bar" placeholder="Ej: Costillar, Brisket, Papas...">
                        </div>
                        <!-- ! INICIO: Opciones de Ordenar -->
                        <div>
                            <label for="sort-select" class="block text-sm font-semibold mb-2">Ordenar por:</label>
                            <select id="sort-select">
                                <option value="default">Relevancia</option>
                                <option value="time-asc">Tiempo (m√°s r√°pido primero)</option>
                                <option value="time-desc">Tiempo (m√°s lento primero)</option>
                                <option value="difficulty-asc">Dificultad (m√°s f√°cil primero)</option>
                                <option value="difficulty-desc">Dificultad (m√°s dif√≠cil primero)</option>
                                <option value="name-asc">Nombre (A-Z)</option>
                                <option value="name-desc">Nombre (Z-A)</option>
                            </select>
                        </div>
                        <!-- ! FIN: Opciones de Ordenar -->
                    </div>
                    
                    <!-- Contenedor de Filtros -->
                    <div id="filter-container" class="flex flex-wrap gap-2">
                        <button class="filter-button active" data-filter="todos">Ver Todo</button>
                        <!-- ! INICIO: Bot√≥n de Favoritos -->
                        <button class="filter-button" data-filter="favoritos">‚ù§Ô∏è Favoritos</button>
                        <!-- ! FIN: Bot√≥n de Favoritos -->
                        <button class="filter-button" data-filter="cerdo">üêñ Cerdo</button>
                        <button class="filter-button" data-filter="res">üêÑ Res</button>
                        <button class="filter-button" data-filter="pollo">üêì Pollo</button>
                        <button class="filter-button" data-filter="cordero">üêë Cordero</button>
                        <button class="filter-button" data-filter="pavo">ü¶É Pavo</button>
                        <button class="filter-button" data-filter="pescado">üêü Pescado</button>
                        <button class="filter-button" data-filter="acompanamiento">ü•ó Acompa√±amiento</button>
                    </div>
                </div>
                <!-- ! FIN: Controles de B√∫squeda y Filtro -->

                <!-- Platos Principales -->
                <h2 id="header-principales" class="text-3xl font-bold text-amber-800 mb-6 border-b-2 border-amber-300 pb-2">Platos Principales (Cap. 5)</h2>
                <!-- ! CONTENEDOR VAC√çO: Las tarjetas se generar√°n aqu√≠ -->
                <div id="grid-principales" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Las tarjetas de recetas principales se inyectar√°n aqu√≠ din√°micamente -->
                </div>

                <!-- Acompa√±amientos y Salsas -->
                <h2 id="header-acompanamientos" class="text-3xl font-bold text-amber-800 mt-12 mb-6 border-b-2 border-amber-300 pb-2">Acompa√±amientos y Salsas (Cap. 6)</h2>
                <!-- ! CONTENEDOR VAC√çO: Las tarjetas se generar√°n aqu√≠ -->
                <div id="grid-acompanamientos" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Las tarjetas de recetas de acompa√±amiento se inyectar√°n aqu√≠ din√°micamente -->
                </div>

                <!-- Mensaje de no resultados -->
                <p id="no-results" class="text-center text-gray-500 text-lg mt-10" style="display: none;">No se encontraron recetas que coincidan con tu b√∫squeda.</p>

            </section>
        </main>

        <!-- Footer con Cr√©ditos -->
        <footer class="p-6 text-center text-sm text-gray-500 border-t border-gray-300 bg-gray-50">
            <p>Cr√©ditos: Juan Miguel Rios Redondo</p>
        </footer>

    </div>

    <!-- Modal para Recetas -->
    <div id="recipe-modal">
        <div id="modal-content">
            <span id="modal-close">&times;</span>
            <h2 id="modal-title" class="text-3xl font-bold mb-4 text-amber-800"></h2>
            <!-- ! Contenedor para el √°rea imprimible -->
            <div id="modal-body-printable">
                <div id="modal-body" class="space-y-4 text-base">
                    <!-- El contenido de la receta se inyectar√° aqu√≠ -->
                </div>
                <!-- ! INICIO: Contenedor de Tips -->
                <div id="modal-tips-content" class="hidden">
                    <h3 class="font-bold text-xl mb-3 text-amber-800">üí° Consejos del Asador</h3>
                    <p id="modal-tips-text" class="text-base"></p>
                </div>
                <!-- ! FIN: Contenedor de Tips -->
            </div>
            <!-- ! Bot√≥n de Imprimir -->
            <button id="modal-print-btn">Imprimir Receta</button>
        </div>
    </div>


    <!-- ! INICIO: Base de datos de recetas en JSON y L√≥gica de la App -->
    <script>
        // --- INICIO: Base de Datos de Recetas (JSON) ---
        // ! REFACTORIZADO: 'content' se ha dividido en 'ingredients' (objetos) e 'instructions' (strings).
        const recipeData = [
            // --- PLATOS PRINCIPALES ---
            {
                id: 'receta-costillar-clasico',
                title: 'Costillar de Cerdo con Sazonado Cl√°sico',
                category: 'cerdo',
                image: 'https://placehold.co/400x200/c27a42/ffffff?text=Costillar+de+Cerdo',
                time: '3-4 horas',
                timeMinutes: 210,
                difficulty: 'Media',
                difficultyValue: 2,
                ingredients: [
                    { amount: "1", unit: "", name: "costillar de cerdo (aprox. 2 kg)." },
                    { amount: "", unit: "", name: "Sazonado Cl√°sico (Cap. 2):", isSubheader: true },
                    { amount: "2", unit: "cdas", name: "de sal", isSubItem: true },
                    { amount: "2", unit: "cdas", name: "de pimienta negra", isSubItem: true },
                    { amount: "1", unit: "cda", name: "de paprika", isSubItem: true },
                    { amount: "1", unit: "cda", name: "de az√∫car moreno", isSubItem: true },
                    { amount: "1", unit: "cdta", name: "de ajo en polvo", isSubItem: true },
                    { amount: "1", unit: "cdta", name: "de cebolla en polvo", isSubItem: true }
                ],
                instructions: [
                    "Lava y seca el costillar.",
                    "Aplica generosamente el sazonado cl√°sico por toda la superficie.",
                    "Precalienta el barril a 121¬∞C.",
                    "Coloca el costillar en la zona indirecta.",
                    "Cocina por 3-4 horas, manteniendo la temperatura y a√±adiendo madera de nogal para ahumar.",
                    "Verifica que la temperatura interna alcance los 71¬∞C.",
                    "Retira, deja reposar 15 minutos y corta."
                ],
                tips: 'Para una costra m√°s sabrosa, puedes rociar el costillar con jugo de manzana cada 45 minutos durante la cocci√≥n.'
            },
            {
                id: 'receta-brisket',
                title: 'Brisket de Res Ahumado',
                category: 'res',
                image: 'https://placehold.co/400x200/a15c38/ffffff?text=Brisket+de+Res',
                time: '10-12 horas',
                timeMinutes: 660,
                difficulty: 'Dif√≠cil',
                difficultyValue: 3,
                ingredients: [
                    { amount: "1", unit: "", name: "brisket de res (4-5 kg)." },
                    { amount: "", unit: "", name: "Sazonado Ahumado (Cap. 2):", isSubheader: true },
                    { amount: "3", unit: "cdas", name: "de sal ahumada", isSubItem: true },
                    { amount: "2", unit: "cdas", name: "de pimienta negra", isSubItem: true },
                    { amount: "1", unit: "cda", name: "de piment√≥n ahumado", isSubItem: true },
                    { amount: "1", unit: "cda", name: "de ajo en polvo", isSubItem: true },
                    { amount: "1", unit: "cda", name: "de cebolla en polvo", isSubItem: true }
                ],
                instructions: [
                    "Lava y seca el brisket.",
                    "Aplica el sazonado ahumado por todas las superficies.",
                    "Precalienta el barril a 107¬∞C.",
                    "Coloca el brisket en la zona indirecta, con la grasa hacia arriba.",
                    "Cocina por 10-12 horas, manteniendo la temperatura y a√±adiendo madera de nogal para ahumar.",
                    "Verifica que la temperatura interna alcance los 88-93¬∞C.",
                    "Retira, envuelve en papel aluminio y deja reposar 30 minutos antes de cortar."
                ],
                tips: 'La paciencia es clave. No subas el fuego. Para atravesar el "estancamiento" (stall) alrededor de los 70¬∞C, puedes envolver el brisket en papel de estraza (butcher paper).'
            },
            {
                id: 'receta-pollo-citricos',
                title: 'Pollo Asado con Marinado de Hierbas y C√≠tricos',
                category: 'pollo',
                image: 'https://placehold.co/400x200/facc15/4a2d1f?text=Pollo+Asado',
                time: '1.5-2 horas',
                timeMinutes: 105,
                difficulty: 'F√°cil',
                difficultyValue: 1,
                ingredients: [
                    { amount: "1", unit: "", name: "pollo entero (aprox. 2 kg)." },
                    { amount: "", unit: "", name: "Marinado de Hierbas y C√≠tricos (Cap. 3):", isSubheader: true },
                    { amount: "1/2", unit: "taza", name: "de jugo de lim√≥n fresco", isSubItem: true },
                    { amount: "1/4", unit: "taza", name: "de aceite de oliva", isSubItem: true },
                    { amount: "2", unit: "cdas", name: "de romero fresco picado", isSubItem: true },
                    { amount: "2", unit: "cdas", name: "de tomillo fresco picado", isSubItem: true },
                    { amount: "3", unit: "", name: "dientes de ajo picados", isSubItem: true },
                    { amount: "", unit: "", name: "Sal y pimienta al gusto", isSubItem: true }
                ],
                instructions: [
                    "Lava y seca el pollo.",
                    "Prepara el marinado.",
                    "Coloca el pollo y el marinado en una bolsa o recipiente. Refrigera por 2-4 horas.",
                    "Precalienta el barril a 177¬∞C.",
                    "Coloca el pollo en la zona indirecta y cocina por 1-1.5 horas, volteando ocasionalmente.",
                    "Verifica que la temperatura interna alcance los 74-79¬∞C en la parte m√°s gruesa.",
                    "Retira y deja reposar 10 minutos antes de cortar."
                ],
                tips: 'Para una piel extra crujiente, seca muy bien el pollo con papel de cocina antes de marinarlo (especialmente si el marinado no es a base de aceite).'
            },
            {
                id: 'receta-cordero-menta',
                title: 'Costillas de Cordero con Salsa de Menta',
                category: 'cordero',
                image: 'https://placehold.co/400x200/8c7a6b/ffffff?text=Costillas+de+Cordero',
                time: '20-30 min',
                timeMinutes: 25,
                difficulty: 'Media',
                difficultyValue: 2,
                ingredients: [
                    { amount: "2", unit: "", name: "costillas de cordero (aprox. 200-250 g c/u)." },
                    { amount: "", unit: "", name: "Salsa de Menta (Basada en Adobo de Yogur y Hierbas Cap. 3):", isSubheader: true },
                    { amount: "1", unit: "taza", name: "de yogur natural", isSubItem: true },
                    { amount: "2", unit: "cdas", name: "de menta fresca picada", isSubItem: true },
                    { amount: "2", unit: "cdas", name: "de cilantro fresco picado", isSubItem: true },
                    { amount: "1", unit: "cdta", name: "de comino molido", isSubItem: true },
                    { amount: "1", unit: "cdta", name: "de paprika", isSubItem: true },
                    { amount: "", unit: "", name: "Sal y pimienta al gusto", isSubItem: true }
                ],
                instructions: [
                    "Lava y seca las costillas.",
                    "Prepara la salsa/adobo de menta.",
                    "Aplica una capa generosa sobre las costillas y marina por al menos 30 minutos.",
                    "Precalienta el barril a 177¬∞C.",
                    "Coloca las costillas en la zona directa y cocina 3-4 minutos por lado (para dorar).",
                    "Mueve a la zona indirecta y contin√∫a cocinando 8-10 minutos, volteando y cepillando con m√°s salsa.",
                    "Verifica que la temperatura interna alcance los 63-71¬∞C (punto medio).",
                    "Sirve con m√°s salsa por encima."
                ],
                tips: 'El cordero se cocina r√°pido. No lo cocines en exceso. El punto medio (rosa por dentro) es ideal para mantener su jugosidad.'
            },
            {
                id: 'receta-pavo-arce',
                title: 'Pechuga de Pavo Ahumada con Glaseado de Arce y Mostaza',
                category: 'pavo',
                image: 'https://placehold.co/400x200/d4a373/ffffff?text=Pechuga+de+Pavo',
                time: '2-3 horas',
                timeMinutes: 150,
                difficulty: 'Media',
                difficultyValue: 2,
                ingredients: [
                    { amount: "1", unit: "", name: "pechuga de pavo (aprox. 2 kg)." },
                    { amount: "", unit: "", name: "Glaseado de Arce y Mostaza:", isSubheader: true },
                    { amount: "1/2", unit: "taza", name: "de sirope de arce", isSubItem: true },
                    { amount: "1/4", unit: "taza", name: "de mostaza Dijon", isSubItem: true },
                    { amount: "1", unit: "cda", name: "de aceite de oliva", isSubItem: true },
                    { amount: "1", unit: "cdta", name: "de paprika", isSubItem: true },
                    { amount: "", unit: "", name: "Sal y pimienta al gusto", isSubItem: true }
                ],
                instructions: [
                    "Lava y seca la pechuga de pavo.",
                    "Prepara el glaseado mezclando los ingredientes.",
                    "Aplica el glaseado sobre la pechuga uniformemente.",
                    "Precalienta el barril a 149¬∞C.",
                    "Coloca la pechuga en la zona indirecta.",
                    "Cocina por 2-3 horas, aplicando m√°s glaseado regularmente.",
                    "Verifica que la temperatura interna alcance los 74-79¬∞C.",
                    "Retira, deja reposar 10 minutos y rebana."
                ],
                tips: 'El pavo tiende a secarse. Usar un marinado o salmuera antes de glasear puede ayudar a mantenerlo jugoso. No cocines de m√°s.'
            },
            {
                id: 'receta-costillas-miel-mostaza',
                title: 'Costillas de Cerdo con Glaseado de Miel y Mostaza',
                category: 'cerdo',
                image: 'https://placehold.co/400x200/e6b980/4a2d1f?text=Costillas+Miel+Mostaza',
                time: '2-3 horas',
                timeMinutes: 150,
                difficulty: 'Media',
                difficultyValue: 2,
                ingredients: [
                    { amount: "2", unit: "racks", name: "de costillas de cerdo (aprox. 1.5 kg c/u)." },
                    { amount: "1/2", unit: "taza", name: "de miel." },
                    { amount: "1/4", unit: "taza", name: "de mostaza Dijon." },
                    { amount: "2", unit: "cdas", name: "de salsa de soja." },
                    { amount: "2", unit: "cdta", name: "de piment√≥n ahumado." },
                    { amount: "1", unit: "cdta", name: "de ajo en polvo." },
                    { amount: "1", unit: "cdta", name: "de cebolla en polvo." },
                    { amount: "", unit: "", name: "Sal y pimienta al gusto." }
                ],
                instructions: [
                    "Lava y seca las costillas.",
                    "Mezcla miel, mostaza, soja, piment√≥n, ajo en polvo y cebolla en polvo para el glaseado.",
                    "Aplica una capa generosa de glaseado y sazona con sal y pimienta.",
                    "Precalienta el barril a 149¬∞C.",
                    "Coloca las costillas en la zona indirecta y cocina 2-3 horas, volteando y aplicando m√°s glaseado cada 30 minutos.",
                    "Verifica que la temperatura interna alcance los 71¬∞C.",
                    "Retira, corta y sirve con m√°s glaseado."
                ],
                tips: 'Aplica el glaseado (que contiene az√∫car/miel) solo durante los √∫ltimos 30-45 minutos de cocci√≥n para evitar que se queme.'
            },
            {
                id: 'receta-costillas-coreanas',
                title: 'Costillas de Cerdo Coreanas a la Parrilla',
                category: 'cerdo',
                image: 'https://placehold.co/400x200/bf4e30/ffffff?text=Costillas+Coreanas',
                time: '1.5-2 horas',
                timeMinutes: 105,
                difficulty: 'Media',
                difficultyValue: 2,
                ingredients: [
                    { amount: "2", unit: "racks", name: "de costillas de cerdo (aprox. 1.5 kg c/u)." },
                    { amount: "1/2", unit: "taza", name: "de salsa de soja." },
                    { amount: "1/4", unit: "taza", name: "de az√∫car moreno." },
                    { amount: "2", unit: "cdas", name: "de aceite de s√©samo." },
                    { amount: "2", unit: "cdas", name: "de cebolla verde picada." },
                    { amount: "2", unit: "", name: "dientes de ajo picados." },
                    { amount: "1", unit: "cdta", name: "de jengibre fresco rallado." },
                    { amount: "1/2", unit: "cdta", name: "de pimienta negra." },
                    { amount: "", unit: "", name: "Semillas de s√©samo tostado para decorar." }
                ],
                instructions: [
                    "Lava y seca las costillas.",
                    "Mezcla soja, az√∫car, aceite de s√©samo, cebolla verde, ajo, jengibre y pimienta para el marinado.",
                    "Marina las costillas en refrigeraci√≥n por al menos 4 horas o toda la noche.",
                    "Precalienta el barril a 177¬∞C.",
                    "Coloca las costillas en la zona indirecta y cocina 1-1.5 horas, volteando y aplicando m√°s marinado cada 20 minutos.",
                    "Verifica que la temperatura interna alcance los 71¬∞C.",
                    "Retira, espolvorea con semillas de s√©samo y sirve."
                ],
                tips: 'Para un sabor m√°s intenso, ralla un poco de pera asi√°tica en el marinado. Las enzimas de la pera ayudan a ablandar la carne.'
            },
            {
                id: 'receta-costillas-ciruela',
                title: 'Costillas de Cerdo con Salsa de Ciruela',
                category: 'cerdo',
                image: 'https://placehold.co/400x200/805060/ffffff?text=Costillas+con+Ciruela',
                time: '2-2.5 horas',
                timeMinutes: 135,
                difficulty: 'Media',
                difficultyValue: 2,
                ingredients: [
                    { amount: "2", unit: "racks", name: "de costillas de cerdo (aprox. 1.5 kg c/u)." },
                    { amount: "1", unit: "taza", name: "de salsa de ciruela." },
                    { amount: "1/4", unit: "taza", name: "de salsa de soja." },
                    { amount: "2", unit: "cdas", name: "de miel." },
                    { amount: "2", unit: "cdta", name: "de jengibre fresco rallado." },
                    { amount: "1", unit: "cdta", name: "de ajo picado." },
                    { amount: "1/2", unit: "cdta", name: "de pimienta roja triturada (opcional)." }
                ],
                instructions: [
                    "Lava y seca las costillas.",
                    "Mezcla salsa de ciruela, soja, miel, jengibre, ajo y pimienta roja (si se usa).",
                    "Aplica la mezcla sobre las costillas y marina al menos 1 hora en refrigeraci√≥n.",
                    "Precalienta el barril a 149¬∞C.",
                    "Coloca las costillas en la zona indirecta y cocina 2-2.5 horas, volteando y aplicando m√°s salsa cada 30 minutos.",
                    "Verifica que la temperatura interna alcance los 71¬∞C.",
                    "Retira, corta y sirve con m√°s salsa."
                ],
                tips: 'La salsa de ciruela (a menudo usada en cocina asi√°tica) puede ser espesa. Puedes aligerarla con un chorrito de vinagre de arroz.'
            },
            {
                id: 'receta-chicharron-crujiente',
                title: 'Chicharr√≥n al Barril Crujiente',
                category: 'cerdo',
                image: 'https://placehold.co/400x200/e6c9a1/4a2d1f?text=Chicharr√≥n+Crujiente',
                time: '1-2 horas',
                timeMinutes: 90,
                difficulty: 'Media',
                difficultyValue: 2,
                ingredients: [
                    { amount: "1", unit: "kg", name: "de piel de cerdo, cortada en trozos peque√±os." },
                    { amount: "2", unit: "cdas", name: "de sal gruesa." },
                    { amount: "1", unit: "cdta", name: "de pimienta negra molida." },
                    { amount: "1", unit: "cdta", name: "de piment√≥n ahumado." },
                    { amount: "", unit: "", name: "Aceite vegetal para fre√≠r." }
                ],
                instructions: [
                    "Lava y seca cuidadosamente la piel de cerdo.",
                    "Mezcla sal, pimienta y piment√≥n ahumado.",
                    "Espolvorea y frota las especias sobre la piel.",
                    "Precalienta el barril a 177¬∞C.",
                    "Coloca la piel en la zona indirecta y cocina 1-2 horas hasta que est√© crujiente y dorada, girando ocasionalmente.",
                    "Retira y escurre sobre papel absorbente.",
                    "Calienta aceite vegetal en una sart√©n grande a 180¬∞C.",
                    "Fr√≠e los chicharrones 1-2 minutos hasta que est√©n completamente crujientes.",
                    "Escurre el exceso de aceite y sirve caliente."
                ],
                tips: 'El secreto del chicharr√≥n es que la piel est√© MUY seca. D√©jala secar en la nevera sin tapar durante unas horas antes de cocinarla.'
            },
            {
                id: 'receta-chicharron-limon',
                title: 'Chicharr√≥n al Barril con Sabor a Lim√≥n y Chile',
                category: 'cerdo',
                image: 'https://placehold.co/400x200/f5d576/4a2d1f?text=Chicharr√≥n+Lim√≥n+y+Chile',
                time: '1-2 horas',
                timeMinutes: 90,
                difficulty: 'Media',
                difficultyValue: 2,
                ingredients: [
                    { amount: "1", unit: "kg", name: "de piel de cerdo, cortada en tiras delgadas." },
                    { amount: "2", unit: "", name: "limones (jugo y ralladura)." },
                    { amount: "2", unit: "cdas", name: "de sal." },
                    { amount: "1", unit: "cda", name: "de chile en polvo." },
                    { amount: "1", unit: "cdta", name: "de ajo en polvo." },
                    { amount: "1", unit: "cdta", name: "de comino molido." },
                    { amount: "", unit: "", name: "Aceite vegetal para fre√≠r." }
                ],
                instructions: [
                    "Lava y seca las tiras de piel.",
                    "Mezcla jugo y ralladura de lim√≥n, sal, chile en polvo, ajo en polvo y comino.",
                    "Marina la piel en la mezcla por al menos 30 minutos en refrigeraci√≥n.",
                    "Precalienta el barril a 177¬∞C.",
                    "Coloca las tiras en la zona indirecta y cocina 1-2 horas hasta que est√©n crujientes y doradas, girando ocasionalmente.",
                    "Retira y escurre sobre papel absorbente.",
                    "Calienta aceite vegetal a 180¬∞C.",
                    "Fr√≠e los chicharrones 1-2 minutos hasta que est√©n completamente crujientes.",
                    "Escurre el exceso de aceite y sirve caliente con rodajas de lim√≥n."
                ],
                tips: 'No a√±adas la ralladura de lim√≥n hasta el final (despu√©s de fre√≠r) para un sabor a lim√≥n m√°s fresco, ya que puede quemarse.'
            },
            {
                id: 'receta-pescado-limon',
                title: 'Pescado al Barril con Salsa de Hierbas y Lim√≥n',
                category: 'pescado',
                image: 'https://placehold.co/400x200/bde0fe/4a2d1f?text=Pescado+al+Barril',
                time: '15-20 min',
                timeMinutes: 18,
                difficulty: 'F√°cil',
                difficultyValue: 1,
                ingredients: [
                    { amount: "4", unit: "filetes", name: "de pescado (aprox. 150 g c/u), como lubina o trucha." },
                    { amount: "2", unit: "", name: "limones (jugo y ralladura)." },
                    { amount: "3", unit: "cdas", name: "de aceite de oliva." },
                    { amount: "2", unit: "", name: "dientes de ajo, picados." },
                    { amount: "2", unit: "cdas", name: "de perejil fresco picado." },
                    { amount: "1", unit: "cdta", name: "de tomillo fresco." },
                    { amount: "", unit: "", name: "Sal y pimienta al gusto." }
                ],
                instructions: [
                    "Mezcla jugo y ralladura de lim√≥n, aceite de oliva, ajo, perejil, tomillo, sal y pimienta.",
                    "Coloca los filetes en una bandeja y vierte la mezcla sobre ellos. Marina 30 minutos en refrigeraci√≥n.",
                    "Precalienta el barril a 177¬∞C.",
                    "Coloca los filetes en la zona indirecta y cocina 8-10 minutos, volteando una vez, hasta que est√©n tiernos.",
                    "Sirve con un poco de la salsa por encima."
                ],
                tips: 'El pescado se cocina muy r√°pido. Estar√° listo cuando se desmenuce f√°cilmente con un tenedor. No lo dejes ni un minuto de m√°s.'
            },
            {
                id: 'receta-pescado-mantequilla',
                title: 'Pescado al Barril con Salsa de Mantequilla y Hierbas',
                category: 'pescado',
                image: 'https://placehold.co/400x200/cddfa0/4a2d1f?text=Pescado+con+Mantequilla',
                time: '15-20 min',
                timeMinutes: 18,
                difficulty: 'F√°cil',
                difficultyValue: 1,
                ingredients: [
                    { amount: "4", unit: "filetes", name: "de pescado (aprox. 150 g c/u), como salm√≥n o trucha." },
                    { amount: "1/2", unit: "taza", name: "(115 g) de mantequilla derretida." },
                    { amount: "2", unit: "cdas", name: "de perejil fresco picado." },
                    { amount: "2", unit: "cdas", name: "de cilantro fresco picado." },
                    { amount: "1", unit: "cda", name: "de estrag√≥n fresco picado." },
                    { amount: "2", unit: "cdta", name: "de jugo de lim√≥n." },
                    { amount: "", unit: "", name: "Sal y pimienta al gusto." }
                ],
                instructions: [
                    "Mezcla mantequilla derretida, perejil, cilantro, estrag√≥n, jugo de lim√≥n, sal y pimienta.",
                    "Coloca los filetes en una bandeja y vierte la mezcla sobre ellos. Marina 30 minutos en refrigeraci√≥n.",
                    "Precalienta el barril a 177¬∞C.",
                    "Coloca los filetes en la zona indirecta y cocina 8-10 minutos, volteando una vez, hasta que est√©n tiernos.",
                    "Sirve con un poco de la salsa por encima."
                ],
                tips: 'Para salm√≥n, considera cocinarlo sobre una tabla de cedro (remojada previamente) en la parrilla para un sabor ahumado extra.'
            },
            // --- ACOMPA√ëAMIENTOS ---
            {
                id: 'receta-pure-ahumado',
                title: 'Pur√© de Papas Ahumadas',
                category: 'acompanamiento',
                image: 'https://placehold.co/400x200/f0e6d2/4a2d1f?text=Pur√©+de+Papas+Ahumado',
                time: '45 min',
                timeMinutes: 45,
                difficulty: 'F√°cil',
                difficultyValue: 1,
                ingredients: [
                    { amount: "4", unit: "", name: "papas grandes, peladas y en cubos." },
                    { amount: "1/2", unit: "taza", name: "de leche caliente." },
                    { amount: "2", unit: "cdas", name: "de mantequilla." },
                    { amount: "", unit: "", name: "Sal y pimienta al gusto." }
                ],
                instructions: [
                    "Cocina las papas en agua con sal hasta que est√©n tiernas. Esc√∫rrelas.",
                    "Precalienta el barril a baja temperatura y agrega astillas de madera de manzana.",
                    "Coloca las papas en una fuente resistente al fuego y ah√∫malas en el barril por 15-20 minutos, revolviendo ocasionalmente.",
                    "Haz un pur√© con las papas ahumadas, agregando leche caliente, mantequilla, sal y pimienta. Mezcla hasta obtener consistencia suave."
                ],
                tips: 'Usa una madera de sabor suave como manzano o cerezo para ahumar las papas. Maderas fuertes como el mezquite pueden ser demasiado intensas.'
            },
            {
                id: 'receta-ensalada-col',
                title: 'Ensalada de Col Rizada con Vinagreta',
                category: 'acompanamiento',
                image: 'https://placehold.co/400x200/55a630/ffffff?text=Ensalada+de+Col+Rizada',
                time: '10 min',
                timeMinutes: 10,
                difficulty: 'F√°cil',
                difficultyValue: 1,
                ingredients: [
                    { amount: "4", unit: "tazas", name: "de col rizada, lavada y picada." },
                    { amount: "1/4", unit: "taza", name: "de pasas." },
                    { amount: "1/4", unit: "taza", name: "de nueces tostadas." },
                    { amount: "", unit: "", name: "Para la vinagreta:", isSubheader: true },
                    { amount: "2", unit: "cdas", name: "de aceite de oliva.", isSubItem: true },
                    { amount: "1", unit: "cda", name: "de vinagre de sidra de manzana.", isSubItem: true },
                    { amount: "1", unit: "cda", name: "de mostaza Dijon.", isSubItem: true },
                    { amount: "1", unit: "cda", name: "de miel.", isSubItem: true },
                    { amount: "", unit: "", name: "Sal y pimienta al gusto.", isSubItem: true }
                ],
                instructions: [
                    "En un taz√≥n grande, combina la col rizada, pasas y nueces.",
                    "En otro taz√≥n, mezcla los ingredientes de la vinagreta.",
                    "Vierte la vinagreta sobre la ensalada y mezcla bien."
                ],
                tips: 'La col rizada (kale) puede ser dura. "Masajea" la col con la vinagreta usando tus manos durante 1-2 minutos para ablandar las hojas.'
            },
            {
                id: 'receta-salsa-bbq',
                title: 'Salsa Barbacoa Casera',
                category: 'acompanamiento',
                image: 'https://placehold.co/400x200/8f250c/ffffff?text=Salsa+Barbacoa',
                time: '15 min',
                timeMinutes: 15,
                difficulty: 'F√°cil',
                difficultyValue: 1,
                ingredients: [
                    { amount: "1", unit: "taza", name: "de k√©tchup." },
                    { amount: "1/4", unit: "taza", name: "de vinagre de sidra de manzana." },
                    { amount: "2", unit: "cdas", name: "de az√∫car moreno." },
                    { amount: "1", unit: "cda", name: "de mostaza Dijon." },
                    { amount: "1", unit: "cdta", name: "de salsa Worcestershire." },
                    { amount: "1", unit: "cdta", name: "de piment√≥n ahumado." },
                    { amount: "1/2", unit: "cdta", name: "de ajo en polvo." },
                    { amount: "1/2", unit: "cdta", name: "de cebolla en polvo." },
                    { amount: "", unit: "", name: "Sal y pimienta al gusto." }
                ],
                instructions: [
                    "Combina todos los ingredientes en una cacerola a fuego medio.",
                    "Lleva a ebullici√≥n, reduce el fuego y cocina a fuego lento 10-15 minutos, removiendo, hasta que espese.",
                    "Deja enfriar antes de usar."
                ],
                tips: 'Para una salsa m√°s compleja, a√±ade 1/4 de taza de bourbon o ron oscuro durante la cocci√≥n.'
            },
            {
                id: 'receta-maiz-parrilla',
                title: 'Ma√≠z a la Parrilla con Mantequilla de Hierbas',
                category: 'acompanamiento',
                image: 'https://placehold.co/400x200/fde047/4a2d1f?text=Ma√≠z+a+la+Parrilla',
                time: '20 min',
                timeMinutes: 20,
                difficulty: 'F√°cil',
                difficultyValue: 1,
                ingredients: [
                    { amount: "4", unit: "mazorcas", name: "de ma√≠z, con hojas." },
                    { amount: "4", unit: "cdas", name: "de mantequilla derretida." },
                    { amount: "2", unit: "cdas", name: "de perejil fresco picado." },
                    { amount: "2", unit: "cdas", name: "de ceboll√≠n fresco picado." },
                    { amount: "", unit: "", name: "Sal y pimienta al gusto." }
                ],
                instructions: [
                    "Remoja las mazorcas en agua por al menos 30 minutos.",
                    "Precalienta el barril a temperatura media-alta.",
                    "Asa las mazorcas directamente en la parrilla, girando, por 10-15 minutos o hasta que est√©n tiernas y doradas.",
                    "Mezcla la mantequilla derretida, perejil, ceboll√≠n, sal y pimienta.",
                    "Cepilla el ma√≠z con la mantequilla de hierbas antes de servir."
                ],
                tips: 'No quites todas las hojas del ma√≠z. Tira de ellas hacia atr√°s, quita los pelos, unta el ma√≠z con mantequilla de hierbas y vuelve a cerrar las hojas. Asa el ma√≠z envuelto en sus propias hojas.'
            },
            {
                id: 'receta-esparragos',
                title: 'Esp√°rragos a la Parrilla con Lim√≥n y Parmesano',
                category: 'acompanamiento',
                image: 'https://placehold.co/400x200/84cc16/ffffff?text=Esp√°rragos',
                time: '10 min',
                timeMinutes: 10,
                difficulty: 'F√°cil',
                difficultyValue: 1,
                ingredients: [
                    { amount: "1", unit: "manojo", name: "de esp√°rragos frescos." },
                    { amount: "2", unit: "cdas", name: "de aceite de oliva." },
                    { amount: "1", unit: "", name: "lim√≥n (jugo y ralladura)." },
                    { amount: "1/4", unit: "taza", name: "de queso parmesano rallado." },
                    { amount: "", unit: "", name: "Sal y pimienta al gusto." }
                ],
                instructions: [
                    "Lava y recorta los extremos le√±osos de los esp√°rragos.",
                    "Mezcla aceite de oliva, jugo y ralladura de lim√≥n, parmesano, sal y pimienta.",
                    "Cepilla los esp√°rragos con esta mezcla.",
                    "Asa en la parrilla del barril por 5-7 minutos, girando, hasta que est√©n tiernos y ligeramente dorados.",
                    "Sirve con m√°s ralladura de lim√≥n y parmesano."
                ],
                tips: 'A√±ade el queso parmesano solo en el √∫ltimo minuto de cocci√≥n, o se quemar√° y amargar√°.'
            },
            {
                id: 'receta-ensalada-tomate',
                title: 'Ensalada de Tomate y Mozzarella con Albahaca',
                category: 'acompanamiento',
                image: 'https://placehold.co/400x200/ef4444/ffffff?text=Ensalada+Tomate+Mozzarella',
                time: '5 min',
                timeMinutes: 5,
                difficulty: 'F√°cil',
                difficultyValue: 1,
                ingredients: [
                    { amount: "4", unit: "", name: "tomates medianos, en rodajas." },
                    { amount: "200", unit: "g", name: "de queso mozzarella fresco, en rodajas." },
                    { amount: "", unit: "", name: "Hojas frescas de albahaca." },
                    { amount: "2", unit: "cdas", name: "de aceite de oliva virgen extra." },
                    { amount: "", unit: "", name: "Vinagre bals√°mico." },
                    { amount: "", unit: "", name: "Sal y pimienta al gusto." }
                ],
                instructions: [
                    "Alterna las rodajas de tomate y mozzarella en un plato.",
                    "Coloca hojas de albahaca entre las rodajas.",
                    "Roc√≠a con aceite de oliva, vinagre bals√°mico, sal y pimienta.",
                    "Deja reposar unos minutos antes de servir."
                ],
                tips: 'Usa tomates de buena calidad y a temperatura ambiente, nunca fr√≠os de la nevera. Sazona los tomates con sal *antes* de a√±adir la mozzarella.'
            },
            {
                id: 'receta-papas-hasselback',
                title: 'Papas Hasselback con Hierbas y Queso',
                category: 'acompanamiento',
                image: 'https://placehold.co/400x200/f5cb5c/4a2d1f?text=Papas+Hasselback',
                time: '1 hora',
                timeMinutes: 60,
                difficulty: 'F√°cil',
                difficultyValue: 1,
                ingredients: [
                    { amount: "4", unit: "", name: "papas medianas." },
                    { amount: "4", unit: "cdas", name: "de mantequilla derretida." },
                    { amount: "2", unit: "cdas", name: "de romero fresco picado." },
                    { amount: "1/4", unit: "taza", name: "de queso cheddar rallado." },
                    { amount: "", unit: "", name: "Sal y pimienta al gusto." }
                ],
                instructions: [
                    "Lava las papas y c√≥rtalas en rodajas finas sin llegar al fondo.",
                    "Precalienta el barril a 204¬∞C.",
                    "Coloca las papas en una fuente resistente al fuego.",
                    "Mezcla la mantequilla derretida con romero, sal y pimienta. Cepilla sobre las papas.",
                    "Hornea en el barril por 45-60 minutos, o hasta que est√©n tiernas y doradas.",
                    "Espolvorea el queso cheddar y hornea unos minutos m√°s hasta que se derrita."
                ],
                tips: 'Para cortar las papas f√°cilmente sin llegar al fondo, col√≥calas entre dos palillos chinos o mangos de cucharas de madera.'
            },
            {
                id: 'receta-yuca-frita',
                title: 'Yuca Frita con Mojo',
                category: 'acompanamiento',
                image: 'https://placehold.co/400x200/ffe8d6/4a2d1f?text=Yuca+Frita+con+Mojo',
                time: '45 min',
                timeMinutes: 45,
                difficulty: 'Media',
                difficultyValue: 2,
                ingredients: [
                    { amount: "2", unit: "", name: "yucas medianas, peladas y en tiras." },
                    { amount: "", unit: "", name: "Aceite vegetal para fre√≠r." },
                    { amount: "", unit: "", name: "Sal al gusto." },
                    { amount: "", unit: "", name: "Para el Mojo:", isSubheader: true },
                    { amount: "4", unit: "", name: "dientes de ajo, picados finamente.", isSubItem: true },
                    { amount: "1/2", unit: "taza", name: "de aceite de oliva.", isSubItem: true },
                    { amount: "1/4", unit: "taza", name: "de jugo de lim√≥n.", isSubItem: true },
                    { amount: "", unit: "", name: "Sal y pimienta al gusto.", isSubItem: true }
                ],
                instructions: [
                    "Hierve las tiras de yuca en agua con sal hasta que est√©n tiernas (20-25 min). Escurre y deja enfriar.",
                    "Precalienta el barril a 190¬∞C para fre√≠r (o usa sart√©n con aceite).",
                    "Fr√≠e las tiras de yuca hasta que est√©n doradas y crujientes. Escurre y sazona con sal.",
                    "Para el mojo: Calienta aceite de oliva, agrega el ajo y cocina a fuego lento hasta que est√© dorado.",
                    "Retira del fuego y mezcla el ajo dorado con jugo de lim√≥n, sal y pimienta.",
                    "Sirve la yuca caliente con el mojo."
                ],
                tips: 'Para una yuca extra crujiente, congela las tiras de yuca *despu√©s* de hervirlas y enfriarlas. Fr√≠elas directamente desde congeladas.'
            },
            {
                id: 'receta-pure-yuca',
                title: 'Pur√© de Yuca con Queso',
                category: 'acompanamiento',
                image: 'https://placehold.co/400x200/fff4e6/4a2d1f?text=Pur√©+de+Yuca',
                time: '30 min',
                timeMinutes: 30,
                difficulty: 'F√°cil',
                difficultyValue: 1,
                ingredients: [
                    { amount: "2", unit: "", name: "yucas medianas, peladas y en trozos." },
                    { amount: "1/2", unit: "taza", name: "de queso crema." },
                    { amount: "1/4", unit: "taza", name: "de leche caliente." },
                    { amount: "2", unit: "cdas", name: "de mantequilla." },
                    { amount: "", unit: "", name: "Sal y pimienta al gusto." }
                ],
                instructions: [
                    "Hierve la yuca en agua con sal hasta que est√© tierna (20-25 min). Escurre.",
                    "En un taz√≥n, mezcla la yuca, queso crema, leche caliente y mantequilla.",
                    "Usa un machacador o procesador para hacer un pur√© suave.",
                    "Sazona con sal y pimienta. Sirve caliente."
                ],
                tips: 'Aseg√∫rate de quitar la hebra central (fibrosa) de la yuca despu√©s de hervirla y antes de hacer el pur√©.'
            }
        ];
        // --- FIN: Base de Datos de Recetas (JSON) ---


        // --- INICIO: L√≥gica de la Aplicaci√≥n ---
        document.addEventListener('DOMContentLoaded', function () {
            
            // --- Declaraci√≥n de variables ---
            const tabs = document.querySelectorAll('.tab-button');
            const tabContents = document.querySelectorAll('.tab-content');
            const accordionItems = document.querySelectorAll('.accordion-item');
            
            // Variables del Modal
            const modal = document.getElementById('recipe-modal');
            const modalClose = document.getElementById('modal-close');
            const modalTitle = document.getElementById('modal-title');
            const modalBody = document.getElementById('modal-body');
            const modalPrintBtn = document.getElementById('modal-print-btn');
            // ! INICIO: Nuevas variables de Modal (Tips)
            const modalTipsContent = document.getElementById('modal-tips-content');
            const modalTipsText = document.getElementById('modal-tips-text');
            // ! FIN: Nuevas variables de Modal (Tips)

            // Variables de Recetas (se llenar√°n din√°micamente)
            let allRecipeCards = []; // Se llenar√° despu√©s de generar las tarjetas
            const gridPrincipales = document.getElementById('grid-principales');
            const gridAcompanamientos = document.getElementById('grid-acompanamientos');
            
            // Variables de Filtro/B√∫squeda
            const filterContainer = document.getElementById('filter-container');
            const searchBar = document.getElementById('search-bar');
            // ! INICIO: Nueva variable (Sort)
            const sortSelect = document.getElementById('sort-select');
            // ! FIN: Nueva variable (Sort)
            const headerPrincipales = document.getElementById('header-principales');
            const headerAcompanamientos = document.getElementById('header-acompanamientos');
            const noResults = document.getElementById('no-results');

            // ! INICIO: Variables de Favoritos
            let favorites = getFavorites();
            // ! FIN: Variables de Favoritos

            // Mapa de iconos
            const iconMap = {
                cerdo: 'üêñ',
                res: 'üêÑ',
                pollo: 'üêì',
                cordero: 'üêë',
                pavo: 'ü¶É',
                pescado: 'üêü',
                acompanamiento: 'ü•ó'
            };

            // --- Funcionalidad de Pesta√±as (Tabs) ---
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    tabs.forEach(t => t.classList.remove('active'));
                    tabContents.forEach(c => c.classList.remove('active'));
                    tab.classList.add('active');
                    const activeTabContent = document.getElementById(tab.dataset.tab + '-content');
                    if (activeTabContent) activeTabContent.classList.add('active');
                });
            });

            // --- Funcionalidad de Acorde√≥n ---
            accordionItems.forEach(item => {
                const header = item.querySelector('.accordion-header');
                const content = item.querySelector('.accordion-content');
                const icon = header.querySelector('span:last-child');

                header.addEventListener('click', () => {
                    const isOpen = content.style.maxHeight;
                    if (isOpen) {
                        content.style.maxHeight = null;
                        if (icon) icon.textContent = '+';
                    } else {
                        if (content) content.style.maxHeight = content.scrollHeight + 'px';
                        if (icon) icon.textContent = '‚àí';
                    }
                });
            });

            // --- ! INICIO: Generaci√≥n Din√°mica de Recetas (Actualizada) ---
            function generateRecipeCards() {
                if (!gridPrincipales || !gridAcompanamientos) return;

                // ! Actualizar favoritos desde localStorage al inicio
                favorites = getFavorites();

                let gridPrincipalesHTML = '';
                let gridAcompanamientosHTML = '';

                recipeData.forEach(recipe => {
                    const icon = iconMap[recipe.category] || 'üçΩÔ∏è';
                    // ! Comprobar si es favorito
                    const isFavorite = favorites.includes(recipe.id);
                    
                    const cardHTML = `
                        <div class="recipe-card rounded-lg shadow-md overflow-hidden" 
                             data-recipe-id="${recipe.id}" 
                             data-category="${recipe.category}"
                             data-time-minutes="${recipe.timeMinutes}"
                             data-difficulty-value="${recipe.difficultyValue}"
                             data-title="${recipe.title.toLowerCase()}"
                        >
                            <div class="recipe-card-image-container">
                                <img src="${recipe.image}" alt="${recipe.title}" class="w-full h-40 object-cover">
                                <!-- ! Bot√≥n de Favorito -->
                                <span class="favorite-btn ${isFavorite ? 'active' : ''}" data-fav-id="${recipe.id}">‚ù§Ô∏è</span>
                            </div>
                            <div class="p-4">
                                <h3 class="text-lg font-bold">${icon} ${recipe.title}</h3>
                            </div>
                            <div class="card-details">
                                <span><strong>Tiempo:</strong> ${recipe.time}</span>
                                <span><strong>Dificultad:</strong> ${recipe.difficulty}</span>
                            </div>
                        </div>
                    `;
                    
                    if (recipe.category === 'acompanamiento') {
                        gridAcompanamientosHTML += cardHTML;
                    } else {
                        gridPrincipalesHTML += cardHTML;
                    }
                });

                gridPrincipales.innerHTML = gridPrincipalesHTML;
                gridAcompanamientos.innerHTML = gridAcompanamientosHTML;

                // ! IMPORTANTE: Seleccionar las tarjetas DESPU√âS de generarlas
                allRecipeCards = document.querySelectorAll('.recipe-card');
                
                // A√±adir listeners a las nuevas tarjetas
                allRecipeCards.forEach(card => {
                    // Listener para abrir el modal (en la tarjeta)
                    card.addEventListener('click', (e) => {
                        // Solo abrir modal si no se hizo clic en el bot√≥n de favorito
                        if (e.target.closest('.favorite-btn')) return;
                        const recipeId = card.dataset.recipeId;
                        openModal(recipeId);
                    });
                });

                // ! A√±adir listeners a los botones de favorito
                document.querySelectorAll('.favorite-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        e.stopPropagation(); // Evitar que se abra el modal
                        toggleFavorite(e.target);
                    });
                });
            }
            // --- ! FIN: Generaci√≥n Din√°mica de Recetas ---


            // --- ! INICIO: Funcionalidad del Modal de Recetas (Actualizada) ---
            function openModal(recipeId) {
                const recipe = recipeData.find(r => r.id === recipeId);
                
                if (recipe && modalTitle && modalBody && modal) {
                    modalTitle.textContent = recipe.title;
                    
                    // ! INICIO: Construcci√≥n din√°mica de contenido
                    let modalHTML = '';

                    // 1. Ingredientes
                    if (recipe.ingredients && recipe.ingredients.length > 0) {
                        modalHTML += '<h3 class="font-bold text-xl mb-3">Ingredientes:</h3>';
                        modalHTML += '<ul class="list-disc pl-5 mb-4 space-y-1">';
                        
                        let sublistOpen = false;
                        recipe.ingredients.forEach(ing => {
                            const itemText = `${ing.amount ? `<strong>${ing.amount}</strong> ` : ''}${ing.unit ? `${ing.unit} ` : ''}${ing.name}`;
                            
                            if (ing.isSubheader) {
                                if (sublistOpen) modalHTML += '</ul></li>'; // Cierra sublista anterior si existe
                                modalHTML += `<li>${itemText}<ul class="list-disc pl-6 mt-1">`; // Abre nueva sublista
                                sublistOpen = true;
                            } else if (ing.isSubItem) {
                                modalHTML += `<li>${itemText}</li>`; // Item dentro de sublista
                            } else {
                                if (sublistOpen) modalHTML += '</ul></li>'; // Cierra sublista anterior
                                modalHTML += `<li>${itemText}</li>`; // Item normal
                                sublistOpen = false;
                            }
                        });
                        if (sublistOpen) modalHTML += '</ul></li>'; // Cierra la √∫ltima sublista
                        modalHTML += '</ul>';
                    }

                    // 2. Instrucciones
                    if (recipe.instructions && recipe.instructions.length > 0) {
                        modalHTML += '<h3 class="font-bold text-xl mb-3">Instrucciones:</h3>';
                        modalHTML += '<ol class="list-decimal pl-5 space-y-2">';
                        recipe.instructions.forEach(step => {
                            modalHTML += `<li>${step}</li>`;
                        });
                        modalHTML += '</ol>';
                    }
                    
                    modalBody.innerHTML = modalHTML;
                    // ! FIN: Construcci√≥n din√°mica de contenido
                    
                    // ! L√≥gica de Tips
                    if (recipe.tips && modalTipsContent && modalTipsText) {
                        modalTipsText.textContent = recipe.tips;
                        modalTipsContent.classList.remove('hidden');
                    } else {
                        modalTipsContent.classList.add('hidden');
                    }

                    modal.style.display = 'flex';
                    document.body.style.overflow = 'hidden';
                }
            }

            function closeModal() {
                if (modal) {
                    modal.style.display = 'none';
                    document.body.style.overflow = 'auto';
                }
            }

            // Clicks para cerrar el modal
            if (modal) modal.addEventListener('click', (e) => { if (e.target === modal) closeModal(); });
            if (modalClose) modalClose.addEventListener('click', closeModal);
            // --- ! FIN: Funcionalidad del Modal de Recetas ---


            // --- ! INICIO: Funcionalidad de Filtro y B√∫squeda combinada (Actualizada) ---
            function updateRecipeView() {
                if (!filterContainer || !searchBar || !allRecipeCards.length || !sortSelect) return;

                const activeFilter = filterContainer.querySelector('.filter-button.active').dataset.filter;
                const searchTerm = searchBar.value.toLowerCase();
                const sortValue = sortSelect.value;
                
                let mainVisibleCards = [];
                let accompVisibleCards = [];

                allRecipeCards.forEach(card => {
                    const category = card.dataset.category;
                    const title = card.dataset.title;
                    const recipeId = card.dataset.recipeId;
                    
                    // ! L√≥gica de Filtro (con Favoritos)
                    const isFavorite = favorites.includes(recipeId);
                    const matchesFilter = (activeFilter === 'todos') || 
                                          (activeFilter === category) || 
                                          (activeFilter === 'favoritos' && isFavorite);
                    const matchesSearch = title.includes(searchTerm);

                    if (matchesFilter && matchesSearch) {
                        card.style.display = 'block';
                        if (category === 'acompanamiento') {
                            accompVisibleCards.push(card);
                        } else {
                            mainVisibleCards.push(card);
                        }
                    } else {
                        card.style.display = 'none';
                    }
                });

                // ! L√≥gica de Ordenamiento
                const sortFunction = (a, b) => {
                    const valA = a.dataset;
                    const valB = b.dataset;

                    switch (sortValue) {
                        case 'time-asc':
                            return parseFloat(valA.timeMinutes) - parseFloat(valB.timeMinutes);
                        case 'time-desc':
                            return parseFloat(valB.timeMinutes) - parseFloat(valA.timeMinutes);
                        case 'difficulty-asc':
                            return parseFloat(valA.difficultyValue) - parseFloat(valB.difficultyValue);
                        case 'difficulty-desc':
                            return parseFloat(valB.difficultyValue) - parseFloat(valA.difficultyValue);
                        case 'name-asc':
                            return valA.title.localeCompare(valB.title);
                        case 'name-desc':
                            return valB.title.localeCompare(valA.title);
                        case 'default':
                        default:
                            return 0; // Mantener el orden del DOM
                    }
                };
                
                if (sortValue !== 'default') {
                    mainVisibleCards.sort(sortFunction);
                    accompVisibleCards.sort(sortFunction);
                }

                // ! Re-apendar al DOM en el orden correcto
                mainVisibleCards.forEach(card => gridPrincipales.appendChild(card));
                accompVisibleCards.forEach(card => gridAcompanamientos.appendChild(card));

                // Actualizar visibilidad de cabeceras
                if (headerPrincipales) headerPrincipales.style.display = (mainVisibleCards.length > 0) ? 'block' : 'none';
                if (headerAcompanamientos) headerAcompanamientos.style.display = (accompVisibleCards.length > 0) ? 'block' : 'none';

                // Mostrar mensaje de no resultados
                if (noResults) {
                    noResults.style.display = (mainVisibleCards.length === 0 && accompVisibleCards.length === 0) ? 'block' : 'none';
                }
            }

            // Event Listeners para Filtro y B√∫squeda
            if (filterContainer) {
                filterContainer.addEventListener('click', (event) => {
                    if (event.target.classList.contains('filter-button')) {
                        filterContainer.querySelectorAll('.filter-button').forEach(btn => btn.classList.remove('active'));
                        event.target.classList.add('active');
                        updateRecipeView();
                    }
                });
            }
            if (searchBar) searchBar.addEventListener('keyup', updateRecipeView);
            // ! Listener para Ordenar
            if (sortSelect) sortSelect.addEventListener('change', updateRecipeView);
            // --- ! FIN: Funcionalidad de Filtro y B√∫squeda ---
            

            // --- ! INICIO: Funciones de Favoritos (Nuevas) ---
            function getFavorites() {
                const favs = localStorage.getItem('asadosBarrilFavorites');
                return favs ? JSON.parse(favs) : [];
            }

            function saveFavorites(favs) {
                localStorage.setItem('asadosBarrilFavorites', JSON.stringify(favs));
            }

            function toggleFavorite(btnElement) {
                const recipeId = btnElement.dataset.favId;
                const index = favorites.indexOf(recipeId);

                if (index > -1) {
                    // Ya es favorito, quitar
                    favorites.splice(index, 1);
                    btnElement.classList.remove('active');
                } else {
                    // No es favorito, a√±adir
                    favorites.push(recipeId);
                    btnElement.classList.add('active');
                }
                saveFavorites(favorites);

                // Si estamos en la vista de favoritos, actualizar la vista
                const activeFilter = filterContainer.querySelector('.filter-button.active').dataset.filter;
                if (activeFilter === 'favoritos') {
                    updateRecipeView();
                }
            }
            // --- ! FIN: Funciones de Favoritos ---


            // --- ! INICIO: Funcionalidad de Imprimir ---
            function handlePrint() {
                const title = modalTitle.textContent;
                // ! Actualizado para incluir los Tips
                const content = document.getElementById('modal-body-printable').innerHTML;
                
                const printWindow = window.open('', '_blank');
                printWindow.document.write('<html><head><title>Imprimir Receta</title>');
                // Estilos simples para impresi√≥n
                printWindow.document.write(`
                    <style>
                        body { font-family: 'Inter', sans-serif; line-height: 1.6; margin: 2rem; }
                        h1 { color: #d97706; }
                        h3 { border-bottom: 1px solid #ccc; padding-bottom: 5px; }
                        ul, ol { padding-left: 20px; }
                        /* Ocultar elementos no deseados en impresi√≥n */
                        #modal-tips-content.hidden { display: none; }
                        #modal-tips-content {
                            background-color: #fafaf8;
                            border-left: 4px solid #d97706;
                            padding: 16px;
                            border-radius: 8px;
                            margin-top: 16px;
                        }
                    </style>
                `);
                printWindow.document.write('</head><body>');
                printWindow.document.write(`<h1>${title}</h1>`);
                printWindow.document.write(content);
                printWindow.document.write('</body></html>');
                
                printWindow.document.close();
                printWindow.focus();
                
                // Esperar a que el contenido se cargue antes de imprimir
                setTimeout(() => {
                    printWindow.print();
                    printWindow.close();
                }, 250);
            }

            if (modalPrintBtn) modalPrintBtn.addEventListener('click', handlePrint);
            // --- ! FIN: Funcionalidad de Imprimir ---


            // --- INICIO: Ejecuci√≥n Inicial ---
            generateRecipeCards();
            updateRecipeView(); // Para ocultar cabeceras si est√°n vac√≠as al inicio (aunque no deber√≠a pasar)

        });
        // --- FIN: L√≥gica de la Aplicaci√≥n ---
    </script>
</body>
</html>
